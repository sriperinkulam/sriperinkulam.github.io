<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>State of The Networks - Jan 2020 | Srikanth Perinkulam</title>
<meta name=keywords content="homelab,pixelfed,sotn"><meta name=description content="A quick rundown on the state of the home-servers I run or applications I host on the cloud.
Last week I opened up my Nextcloud instance for external access. Now, since my brother&rsquo;s RPi4 was already exposed on the same network, I had to setup a reverse proxy on another RPi3 to access both simultaneously behind the router. Here&rsquo;s the current setup:


Proxy server: An RPi3 running on Raspbian Buster Lite with HAProxy installed to handle the reverse proxy. Here&rsquo;s the gist of the code that&rsquo;s handling all the heavy lifting. Since SSL is handled by the other servers themselves, all I needed was a quick pass-through handshake from HAProxy."><meta name=author content="map[email:ssphugo@srkn.anonaddy.com name:Srikanth Perinkulam nick:SSP]"><link rel=canonical href=http://localhost:1313/2020/02/04/state-of-the-networks-jan-2020/><link crossorigin=anonymous href=/assets/css/stylesheet.ff25044c0e8b288ea9887b21a2a2c811d3ae590ca5420e2460193f268288cbaa.css integrity="sha256-/yUETA6LKI6piHshoqLIEdOuWQylQg4kYBk/JoKIy6o=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/2020/02/04/state-of-the-networks-jan-2020/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=webmention href=https://webmention.io/srikanthperinkulam.com/webmention><link rel=pingback href=https://webmention.io/srikanthperinkulam.com/xmlrpc><script src=/webmention.min.js async></script><script src=https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.4.1/purify.min.js integrity="sha512-uHOKtSfJWScGmyyFr2O2+efpDx2nhwHU2v7MVeptzZoiC7bdF6Ny/CmZhN2AwIK1oCFiVQQ5DA/L9FSzyPNu6Q==" crossorigin=anonymous referrerpolicy=no-referrer></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css><link href=https://micro.blog/sp rel=me><link rel=webmention href=https://micro.blog/webmention><link rel=authorization_endpoint href=https://micro.blog/indieauth/auth><link rel=token_endpoint href=https://micro.blog/indieauth/token><meta property="og:title" content="State of The Networks - Jan 2020"><meta property="og:description" content="A quick rundown on the state of the home-servers I run or applications I host on the cloud.
Last week I opened up my Nextcloud instance for external access. Now, since my brother&rsquo;s RPi4 was already exposed on the same network, I had to setup a reverse proxy on another RPi3 to access both simultaneously behind the router. Here&rsquo;s the current setup:


Proxy server: An RPi3 running on Raspbian Buster Lite with HAProxy installed to handle the reverse proxy. Here&rsquo;s the gist of the code that&rsquo;s handling all the heavy lifting. Since SSL is handled by the other servers themselves, all I needed was a quick pass-through handshake from HAProxy."><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/2020/02/04/state-of-the-networks-jan-2020/"><meta property="og:image" content="http://localhost:1313/images/favicon/apple-touch-icon.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-02-04T00:00:00+00:00"><meta property="article:modified_time" content="2020-02-04T00:00:00+00:00"><meta property="og:site_name" content="Srikanth Perinkulam"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/images/favicon/apple-touch-icon.png"><meta name=twitter:title content="State of The Networks - Jan 2020"><meta name=twitter:description content="A quick rundown on the state of the home-servers I run or applications I host on the cloud.
Last week I opened up my Nextcloud instance for external access. Now, since my brother&rsquo;s RPi4 was already exposed on the same network, I had to setup a reverse proxy on another RPi3 to access both simultaneously behind the router. Here&rsquo;s the current setup:


Proxy server: An RPi3 running on Raspbian Buster Lite with HAProxy installed to handle the reverse proxy. Here&rsquo;s the gist of the code that&rsquo;s handling all the heavy lifting. Since SSL is handled by the other servers themselves, all I needed was a quick pass-through handshake from HAProxy."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"State of The Networks - Jan 2020","item":"http://localhost:1313/2020/02/04/state-of-the-networks-jan-2020/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"State of The Networks - Jan 2020","name":"State of The Networks - Jan 2020","description":"A quick rundown on the state of the home-servers I run or applications I host on the cloud.\nLast week I opened up my Nextcloud instance for external access. Now, since my brother\u0026rsquo;s RPi4 was already exposed on the same network, I had to setup a reverse proxy on another RPi3 to access both simultaneously behind the router. Here\u0026rsquo;s the current setup:\nProxy server: An RPi3 running on Raspbian Buster Lite with HAProxy installed to handle the reverse proxy. Here\u0026rsquo;s the gist of the code that\u0026rsquo;s handling all the heavy lifting. Since SSL is handled by the other servers themselves, all I needed was a quick pass-through handshake from HAProxy.\n","keywords":["homelab","pixelfed","sotn"],"articleBody":"A quick rundown on the state of the home-servers I run or applications I host on the cloud.\nLast week I opened up my Nextcloud instance for external access. Now, since my brother’s RPi4 was already exposed on the same network, I had to setup a reverse proxy on another RPi3 to access both simultaneously behind the router. Here’s the current setup:\nProxy server: An RPi3 running on Raspbian Buster Lite with HAProxy installed to handle the reverse proxy. Here’s the gist of the code that’s handling all the heavy lifting. Since SSL is handled by the other servers themselves, all I needed was a quick pass-through handshake from HAProxy.\nServer 01: An RPi3 running on NextcloudPi essentially serving Nextcloud for all my file needs. Data is simultaneously backed up on a couple machines within the network. Decided against a remote backup [S3/Backblaze] for now.\nServer 02: An RPi4 running on Diet-Pi and serving Pi-Hole and a Nextcloud instance. I’ve turned off DHCP on the Orbi router and delegated that to the Pi-Hole. Both the Pi-Hole and the router have static IPs assigned to the SBCs and my trusty Dell machine based on their MAC address. I’m debating if I should move the Pi-Hole over to the Proxy Server…\nBeyond the home-lab, I have a droplet with DigitalOcean serving this website and a few other portals I manage. ServerPilot runs in the background on that droplet taking care of all the critical needs. I do intend to shift this over to a home-lab once I get hold of my ODroid XU4 which is currently in the Uganda shipment several thousand miles away in Chennai!\nEarly this year, I also procured a Hetzner cloud instance to test its stability and see if I could move over certain portals to it. Should say I’m pretty impressed! Running on Debian Stretch and powered by Yunohost, I installed PixelFed and Wallabag. Installation has never been any easier! One drawback for sure is that the code-base may be a bit lagged as it gets deployed on Yunohost. Nevertheless, it’s pure magic to see things getting installed with just a few clicks and not much back-end work.\nAnd then, I manage a Moodle Bitnami instance running on an AWS instance. I intend to move it over to the Hetzner cloud over the next month or so.\n","wordCount":"390","inLanguage":"en","image":"http://localhost:1313/images/favicon/apple-touch-icon.png","datePublished":"2020-02-04T00:00:00Z","dateModified":"2020-02-04T00:00:00Z","author":{"@type":"Person","name":{"email":"ssphugo@srkn.anonaddy.com","name":"Srikanth Perinkulam","nick":"SSP"}},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/2020/02/04/state-of-the-networks-jan-2020/"},"publisher":{"@type":"Organization","name":"Srikanth Perinkulam","logo":{"@type":"ImageObject","url":"http://localhost:1313/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Srikanth Perinkulam (Alt + H)">Srikanth Perinkulam</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=http://localhost:1313/archives/ title=Archive><span>Archive</span></a></li><li><a href=http://localhost:1313/micro/ title=Micro><span>Micro</span></a></li><li><a href=http://localhost:1313/now/ title=Now><span>Now</span></a></li><li><a href=http://localhost:1313/photos/ title=Photos><span>Photos</span></a></li><li><a href=http://localhost:1313/rewind/ title=Rewind><span>Rewind</span></a></li><li><a href=http://localhost:1313/categories/ title=Categories><span>Categories</span></a></li><li><a href=http://localhost:1313/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">State of The Networks - Jan 2020</h1><div class=post-meta><span title='2020-02-04 00:00:00 +0000 UTC'>February 4, 2020</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;390 words&nbsp;·&nbsp;map[email:ssphugo@srkn.anonaddy.com name:Srikanth Perinkulam nick:SSP]</div></header><div class=post-content><p><em>A quick rundown on the state of the home-servers I run or applications I host on the cloud.</em></p><p>Last week I opened up my Nextcloud instance for external access. Now, since my brother&rsquo;s RPi4 was already exposed on the same network, I had to setup a reverse proxy on another RPi3 to access both simultaneously behind the router. Here&rsquo;s the current setup:</p><p><img loading=lazy src=images/State-of-the-Network-Jan-2020-.jpg alt></p><p><strong>Proxy server:</strong> An RPi3 running on Raspbian Buster Lite with HAProxy installed to handle the reverse proxy. Here&rsquo;s the <a href=https://gist.github.com/sriperinkulam/23fee95d454fe3a9ff18a0555734e3ab>gist of the code</a> that&rsquo;s handling all the heavy lifting. Since SSL is handled by the other servers themselves, all I needed was a quick pass-through handshake from HAProxy.</p><p><strong>Server 01:</strong> An RPi3 running on NextcloudPi essentially serving Nextcloud for all my file needs. Data is simultaneously backed up on a couple machines within the network. Decided against a remote backup [S3/Backblaze] for now.</p><p><strong>Server 02:</strong> An RPi4 running on Diet-Pi and serving Pi-Hole and a Nextcloud instance. I&rsquo;ve turned off DHCP on the Orbi router and delegated that to the Pi-Hole. Both the Pi-Hole and the router have static IPs assigned to the SBCs and my trusty Dell machine based on their MAC address. I&rsquo;m debating if I should move the Pi-Hole over to the Proxy Server&mldr;</p><p>Beyond the home-lab, I have a droplet with DigitalOcean serving this website and a few other portals I manage. ServerPilot runs in the background on that droplet taking care of all the critical needs. I do intend to shift this over to a home-lab once I get hold of my ODroid XU4 which is currently in the Uganda shipment several thousand miles away in Chennai!</p><p>Early this year, I also procured a Hetzner cloud instance to test its stability and see if I could move over certain portals to it. Should say I&rsquo;m pretty impressed! Running on Debian Stretch and powered by Yunohost, I installed <a href=https://pixel.srkn.org/sriperinkulam>PixelFed</a> and Wallabag. Installation has never been any easier! One drawback for sure is that the code-base may be a bit lagged as it gets deployed on Yunohost. Nevertheless, it&rsquo;s pure magic to see things getting installed with just a few clicks and not much back-end work.</p><p>And then, I manage a Moodle Bitnami instance running on an AWS instance. I intend to move it over to the Hetzner cloud over the next month or so.</p></div><div class=comments><h3>💬 Comments</h3><script data-isso=https://isso.srikanthperinkulam.com/ data-isso-id=thread-id data-isso-css=true data-isso-lang=en data-isso-reply-to-self=true data-isso-reply-notifications=true data-isso-require-author=true data-isso-require-email=false data-isso-max-comments-top=10 data-isso-max-comments-nested=5 data-isso-reveal-on-click=5 data-isso-avatar=false data-isso-gravatar=true data-isso-feed=false data-isso-vote=true src=https://isso.srikanthperinkulam.com/js/embed.min.js></script><section id=isso-thread><noscript>Javascript needs to be activated to view comments.</noscript></section></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/homelab/>Homelab</a></li><li><a href=http://localhost:1313/tags/pixelfed/>Pixelfed</a></li><li><a href=http://localhost:1313/tags/sotn/>Sotn</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/2020/02/29/weeknote-09-ashland-and-taxtime/><span class=title>« Prev</span><br><span>Weeknote 09 - Ashland and Taxtime</span>
</a><a class=next href=http://localhost:1313/2020/01/26/weeknote-04-puzzled-pixels/><span class=title>Next »</span><br><span>Weeknote 04 - Puzzled Pixels</span></a></nav></footer><div class=comments id=comments></div><mastodon-comments host=chat.srkn.org user=ssp tootid=ZgotmplZ style="width : 1024px"></mastodon-comments><style>.comments{display:flex;flex-direction:column}.comment{display:flex;padding:10px;width:100%;flex-direction:column}.author .avatar{display:flex;align-self:flex-start;height:40px}.avatar img{border-radius:8px;width:40px;height:40px;align-self:flex-start}.author{width:100%;display:flex;flex-direction:row;align-self:flex-start;height:40px;margin-bottom:5px}.author .name{height:20px;padding-left:5px}.author .name .username{height:20px}.author .date{width:200px;height:20px}</style><script>const url="https://micro.blog/conversation.js?format=jsonfeed&url=http://localhost:1313/"+window.location.pathname;fetch(url).then(e=>e.json()).then(e=>{if(e.items.length===0)comments.innerHTML+="No webmentions yet..";else{const t=document.getElementById("comments");t.innerHTML+=e.items.map(e=>{const{author:{avatar:t,name:n,url:s},date_published:o,content_html:i}=e;return`
          <div class='comment'>
            <div class='author'>
              <div class='avatar'><img src="${t}" /></div>
              <div class='name'>
                <div class='username'><a href="${s}">${n}</a></div>
                <div class='date'>${new Date(o).toDateString()}</div>
              </div>
            </div>
            ${i}
          </div>
        `}).join("")}})</script><div id=webmentions></div></article></main><footer class=footer></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><footer class=footer><section class=h-card><a class="u-url u-uid" href=http://localhost:1313/><span class=p-name>Srikanth Perinkulam</span>
</a><span><img class=u-photo src=/images/favicon/favicon-32x32.png style=display:none alt></span>
<span class=p-note><br>Mountains, Family, Privacy and everything else.<br>Current location: <span class=p-locality>CDMX >> Cameroon.</span><br>Contact: <a class=u-url rel=me href=https://micro.blog/sp>Micro.blog</a> |
<a class=u-url rel=me href=https://chat.srkn.org/@ssp>Fediverse</a> |
<a class=u-url rel=me href=https://github.com/sriperinkulam>Github</a></span></section></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>