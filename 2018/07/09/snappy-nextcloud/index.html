<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Snappy Nextcloud | Srikanth Perinkulam</title>
<meta name=keywords content="chatter,coreos,nextcloud-box,snappy,ubuntu"><meta name=description content="Last year, I procured a Nextcloud box and moved part of my data to it. I&rsquo;d just heard about Ubuntu Snappy Core OS and was keen on porting my install to that setup. I finally got around doing that last week and thought I&rsquo;d quickly jot down the install steps for reference later. Essentially, I installed the Core OS on a 32GB microSD card and installed Nextcloud as a snap. Two 1TB hard drives service the Pi3 and are synced with rclone. Below is a crude outline of the setup:"><meta name=author content="map[email:ssphugo@srkn.anonaddy.com name:Srikanth Perinkulam nick:SSP]"><link rel=canonical href=https://srikanthperinkulam.com/2018/07/09/snappy-nextcloud/><link crossorigin=anonymous href=/assets/css/stylesheet.17f1eeb3916f1df8a162ae48bccbf0d7bc0e2f96dc551f30858f9778563d56df.css integrity="sha256-F/Hus5FvHfihYq5IvMvw17wOL5bcVR8whY+XeFY9Vt8=" rel="preload stylesheet" as=style><link rel=icon href=https://srikanthperinkulam.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://srikanthperinkulam.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://srikanthperinkulam.com/favicon-32x32.png><link rel=apple-touch-icon href=https://srikanthperinkulam.com/apple-touch-icon.png><link rel=mask-icon href=https://srikanthperinkulam.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://srikanthperinkulam.com/2018/07/09/snappy-nextcloud/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=webmention href=https://webmention.io/srikanthperinkulam.com/webmention><link rel=pingback href=https://webmention.io/srikanthperinkulam.com/xmlrpc><script src=/webmention.min.js async></script><script src=https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.4.1/purify.min.js integrity="sha512-uHOKtSfJWScGmyyFr2O2+efpDx2nhwHU2v7MVeptzZoiC7bdF6Ny/CmZhN2AwIK1oCFiVQQ5DA/L9FSzyPNu6Q==" crossorigin=anonymous referrerpolicy=no-referrer></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css><meta property="og:title" content="Snappy Nextcloud"><meta property="og:description" content="Last year, I procured a Nextcloud box and moved part of my data to it. I&rsquo;d just heard about Ubuntu Snappy Core OS and was keen on porting my install to that setup. I finally got around doing that last week and thought I&rsquo;d quickly jot down the install steps for reference later. Essentially, I installed the Core OS on a 32GB microSD card and installed Nextcloud as a snap. Two 1TB hard drives service the Pi3 and are synced with rclone. Below is a crude outline of the setup:"><meta property="og:type" content="article"><meta property="og:url" content="https://srikanthperinkulam.com/2018/07/09/snappy-nextcloud/"><meta property="og:image" content="https://srikanthperinkulam.com/images/favicon/apple-touch-icon.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-07-09T00:00:00+00:00"><meta property="article:modified_time" content="2018-07-09T00:00:00+00:00"><meta property="og:site_name" content="Srikanth Perinkulam"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://srikanthperinkulam.com/images/favicon/apple-touch-icon.png"><meta name=twitter:title content="Snappy Nextcloud"><meta name=twitter:description content="Last year, I procured a Nextcloud box and moved part of my data to it. I&rsquo;d just heard about Ubuntu Snappy Core OS and was keen on porting my install to that setup. I finally got around doing that last week and thought I&rsquo;d quickly jot down the install steps for reference later. Essentially, I installed the Core OS on a 32GB microSD card and installed Nextcloud as a snap. Two 1TB hard drives service the Pi3 and are synced with rclone. Below is a crude outline of the setup:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://srikanthperinkulam.com/posts/"},{"@type":"ListItem","position":2,"name":"Snappy Nextcloud","item":"https://srikanthperinkulam.com/2018/07/09/snappy-nextcloud/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Snappy Nextcloud","name":"Snappy Nextcloud","description":"Last year, I procured a Nextcloud box and moved part of my data to it. I\u0026rsquo;d just heard about Ubuntu Snappy Core OS and was keen on porting my install to that setup. I finally got around doing that last week and thought I\u0026rsquo;d quickly jot down the install steps for reference later. Essentially, I installed the Core OS on a 32GB microSD card and installed Nextcloud as a snap. Two 1TB hard drives service the Pi3 and are synced with rclone. Below is a crude outline of the setup:\n","keywords":["chatter","coreos","nextcloud-box","snappy","ubuntu"],"articleBody":"Last year, I procured a Nextcloud box and moved part of my data to it. I‚Äôd just heard about Ubuntu Snappy Core OS and was keen on porting my install to that setup. I finally got around doing that last week and thought I‚Äôd quickly jot down the install steps for reference later. Essentially, I installed the Core OS on a 32GB microSD card and installed Nextcloud as a snap. Two 1TB hard drives service the Pi3 and are synced with rclone. Below is a crude outline of the setup:\nInstall and sign-in to the UbuntuCore OS:\n1.Download the latest Ubuntu Core OS and use¬†Etcher to burn it on to a microSSD card.\n2.On your local machine generate a public/private rsa key using the following command: ssh-keygen -t rsa Create an UbuntuOne account if you don‚Äôt already have one and import your ssh key to your account. You‚Äôll need this to ssh into your Core OS pretty soon.\n3.Slide in the microSSD card onto the Pi3 board. Then connect a monitor, keyboard and hard drive to the Pi3 and power it on. The Pi3 Board B comes with in-built wi-fi and bluetooth and once powered on it should automatically prompt you to connect to the wi-fi and then to your UbuntuONE account. Once this is setup, you should be able to ssh into the CoreOS from your local machine using: ssh ubuntu-username@192.168.0.xx [btw] If ssh fails - ‚ÄúError - signandsend_pubkey: signing failed: agent refused operation‚Äù. This is most likely because the ssh agent is already running but isn‚Äôt able to find the private keys. To add the keys to the authentication agent, enter ssh-add. Also to see list of fingerprints of all identities added use ssh-add -l [/btw][btw]To add a password for the user: sudo passwd ubuntu-username[/btw][btw]To re-configure network at anytime: sudo console-conf[/btw]\nExternal Drive setup 1.I use two external hard-drives one as a primary and the other as a secondary. First format the drives: sudo fdisk /dev/sda [btw]Welcome to fdisk (util-linux 2.27.1). Changes will remain in memory only, until you decide to write them. Be careful before using the write command. Command (m for help): o Created a new DOS disklabel with disk identifier 0x8b913f43. Command (m for help): n Partition type p primary (0 primary, 0 extended, 4 free) e extended (container for logical partitions) Select (default p): p Partition number (1-4, default 1): First sector (2048-1953458175, default 2048): Last sector, +sectors or +size{K,M,G,T,P} (2048-1953458175, default 1953458175): Created a new partition 1 of type 'Linux' and of size 931.5 GiB. Command (m for help): w The partition table has been altered. Calling ioctl() to re-read partition table. Syncing disks. [/btw]\n2.Format the partition and give it the label data. This label will be used to reference it for mounting later: sudo mkfs.ext4 -L data /dev/sda1 [btw] mke2fs 1.42.13 (17-May-2015) /dev/sda1 contains a ext4 file system labelled ‚Äòdata‚Äô last mounted on Sat Nov 18 08:38:49 2017 Proceed anyway? (y,n) y Creating filesystem with 244182016 4k blocks and 61046784 inodes Filesystem UUID: c03685e6-fc4d-4d69-b8cf-8b17b24f2e0a Superblock backups stored on blocks: 32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968, 102400000, 214990848 Allocating group tables: done\nWriting inode tables: done\nCreating journal (32768 blocks): done Writing superblocks and filesystem accounting information: done [/btw]\n3.To mount the partition we‚Äôre forced to rely on systemd since most of Ubuntu core system is read-only and editing /etc/fstab is not an option. Mount units need to be named after the mount point directories they control. So create the media-data.mount unit: sudo vi /writable/system-data/etc/systemd/system/media-data.mount and add in the following content: [Unit] Description=Mount unit for data [Mount] What=/dev/disk/by-label/data Where=/media/data Type=ext4 [Install] WantedBy=multi-user.target\n4.Reload systemd to reflect the changes,Start and enable the mount volume so it gets automatically mounted: sudo systemctl daemon-reload sudo systemctl start media-data.mount sudo systemctl enable media-data.mount\n5.Make sure Ubuntucore is up to date and refresh: sudo snap refresh sudo reboot After the reboot make sure /media/data is mounted and functional: sudo systemctl status media-data.mount\nInstall and configure Nextcloud as a snap\n1.Install Nextcloud: sudo snap install nextcloud 2.Access the nextcloud install from any browser in the network using the IP address: http://192.168.0.xx, create an admin account and complete the installation. 3.Enable the ‚ÄòExternal Storages‚Äô app under ‚ÄòApps‚Äô. 4.Associate the removable media with nextcloud: sudo snap connect nextcloud:removable-media core:removable-media 5.Map /media/data with nextcloud in the external storage with the following settings: Folder name: data External storage: Local Authentication: None Configuration: /media/data Available for: All 6.Setup encryption certificates: sudo nextcloud.enable-https self-signed 7.To access the setup pi3 server from outside the local network, you‚Äôll need to map the dynamic dns provided by your ISP to a global address. I used no-ip and my netgear router to facilitate this. 8. Do note that when you upload files, by default they‚Äôre saved to the microSD card!![btw]here: /var/snap/nextcloud/common/nextcloud/data/NC_user/files[/btw]. Read this forum for details. 9. If more than one user would be using the external data mount either install the ‚ÄòFile access control‚Äô app and setup rules or create folders for each person and just mount those folders for each user in the Nextcloud admin panel.\n","wordCount":"851","inLanguage":"en","image":"https://srikanthperinkulam.com/images/favicon/apple-touch-icon.png","datePublished":"2018-07-09T00:00:00Z","dateModified":"2018-07-09T00:00:00Z","author":{"@type":"Person","name":{"email":"ssphugo@srkn.anonaddy.com","name":"Srikanth Perinkulam","nick":"SSP"}},"mainEntityOfPage":{"@type":"WebPage","@id":"https://srikanthperinkulam.com/2018/07/09/snappy-nextcloud/"},"publisher":{"@type":"Organization","name":"Srikanth Perinkulam","logo":{"@type":"ImageObject","url":"https://srikanthperinkulam.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://srikanthperinkulam.com/ accesskey=h title="Srikanth Perinkulam (Alt + H)">Srikanth Perinkulam</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://srikanthperinkulam.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://srikanthperinkulam.com/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://srikanthperinkulam.com/micro/ title=Micro><span>Micro</span></a></li><li><a href=https://srikanthperinkulam.com/now/ title=Now><span>Now</span></a></li><li><a href=https://srikanthperinkulam.com/photos/ title=Photos><span>Photos</span></a></li><li><a href=https://srikanthperinkulam.com/rewind/ title=Rewind><span>Rewind</span></a></li><li><a href=https://srikanthperinkulam.com/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://srikanthperinkulam.com/contact/ title=Contact><span>Contact</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://srikanthperinkulam.com/>Home</a>&nbsp;¬ª&nbsp;<a href=https://srikanthperinkulam.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Snappy Nextcloud</h1><div class=post-meta><span title='2018-07-09 00:00:00 +0000 UTC'>July 9, 2018</span>&nbsp;¬∑&nbsp;4 min&nbsp;¬∑&nbsp;851 words&nbsp;¬∑&nbsp;SSP</div></header><div class=post-content><p>Last year, I procured a <a href=https://nextcloud.com/box/>Nextcloud box</a> and moved part of my data to it. I&rsquo;d just heard about <a href=https://srikanthperinkulam.com/2017/11/04/fired-up/>Ubuntu Snappy Core OS</a> and was keen on porting my install to that setup. I finally got around doing that last week and thought I&rsquo;d quickly jot down the install steps for reference later. Essentially, I installed the Core OS on a 32GB microSD card and installed Nextcloud as a snap. Two 1TB hard drives service the Pi3 and are synced with rclone. Below is a crude outline of the setup:</p><p><strong>Install and sign-in to the UbuntuCore OS:</strong></p><p>1.Download the latest <a href=https://www.ubuntu.com/core>Ubuntu Core OS</a> and use¬†<a href=https://etcher.io/>Etcher</a> to burn it on to a microSSD card.</p><p>2.On your local machine generate a public/private rsa key using the following command: <code>ssh-keygen -t rsa</code> Create an <a href=https://login.ubuntu.com/>UbuntuOne</a> account if you don&rsquo;t already have one and import your ssh key to your account. You&rsquo;ll need this to ssh into your Core OS pretty soon.</p><p>3.Slide in the microSSD card onto the Pi3 board. Then connect a monitor, keyboard and hard drive to the Pi3 and power it on. The Pi3 Board B comes with in-built wi-fi and bluetooth and once powered on it should automatically prompt you to connect to the wi-fi and then to your UbuntuONE account. Once this is setup, you should be able to ssh into the CoreOS from your local machine using: <code>ssh ubuntu-username@192.168.0.xx</code> [btw] If ssh fails - &ldquo;Error - signandsend_pubkey: signing failed: agent refused operation&rdquo;. This is most likely because the ssh agent is already running but isn&rsquo;t able to find the private keys. To add the keys to the authentication agent, enter <code>ssh-add</code>. Also to see list of fingerprints of all identities added use <code>ssh-add -l</code> [/btw][btw]To add a password for the user: <code>sudo passwd ubuntu-username</code>[/btw][btw]To re-configure network at anytime: <code>sudo console-conf</code>[/btw]</p><p><strong>External Drive setup</strong> 1.I use two external hard-drives one as a primary and the other as a secondary. First format the drives: <code>sudo fdisk /dev/sda</code> [btw]<code>Welcome to fdisk (util-linux 2.27.1). Changes will remain in memory only, until you decide to write them. Be careful before using the write command. Command (m for help): o Created a new DOS disklabel with disk identifier 0x8b913f43. Command (m for help): n Partition type p primary (0 primary, 0 extended, 4 free) e extended (container for logical partitions) Select (default p): p Partition number (1-4, default 1): First sector (2048-1953458175, default 2048): Last sector, +sectors or +size{K,M,G,T,P} (2048-1953458175, default 1953458175): Created a new partition 1 of type 'Linux' and of size 931.5 GiB. Command (m for help): w The partition table has been altered. Calling ioctl() to re-read partition table. Syncing disks.</code> [/btw]</p><p>2.Format the partition and give it the label data. This label will be used to reference it for mounting later: <code>sudo mkfs.ext4 -L data /dev/sda1</code> [btw] mke2fs 1.42.13 (17-May-2015) /dev/sda1 contains a ext4 file system labelled &lsquo;data&rsquo; last mounted on Sat Nov 18 08:38:49 2017 Proceed anyway? (y,n) y Creating filesystem with 244182016 4k blocks and 61046784 inodes Filesystem UUID: c03685e6-fc4d-4d69-b8cf-8b17b24f2e0a Superblock backups stored on blocks: 32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968, 102400000, 214990848 Allocating group tables: done<br>Writing inode tables: done<br>Creating journal (32768 blocks): done Writing superblocks and filesystem accounting information: done [/btw]</p><p>3.To mount the partition we&rsquo;re forced to rely on systemd since most of Ubuntu core system is read-only and editing /etc/fstab is not an option. Mount units need to be named after the mount point directories they control. So create the media-data.mount unit: <code>sudo vi /writable/system-data/etc/systemd/system/media-data.mount</code> and add in the following content: <code>[Unit] Description=Mount unit for data [Mount] What=/dev/disk/by-label/data Where=/media/data Type=ext4 [Install] WantedBy=multi-user.target</code></p><p>4.Reload systemd to reflect the changes,Start and enable the mount volume so it gets automatically mounted: <code>sudo systemctl daemon-reload sudo systemctl start media-data.mount sudo systemctl enable media-data.mount</code></p><p>5.Make sure Ubuntucore is up to date and refresh: <code>sudo snap refresh sudo reboot</code> After the reboot make sure /media/data is mounted and functional: <code>sudo systemctl status media-data.mount</code></p><p><strong>Install and configure Nextcloud as a snap</strong></p><p>1.Install Nextcloud: <code>sudo snap install nextcloud</code> 2.Access the nextcloud install from any browser in the network using the IP address: <a href=http://192.168.0.xx>http://192.168.0.xx</a>, create an admin account and complete the installation. 3.Enable the &lsquo;External Storages&rsquo; app under &lsquo;Apps&rsquo;. 4.Associate the removable media with nextcloud: <code>sudo snap connect nextcloud:removable-media core:removable-media</code> 5.Map /media/data with nextcloud in the external storage with the following settings: <code>Folder name: data External storage: Local Authentication: None Configuration: /media/data Available for: All</code> 6.Setup encryption certificates: <code>sudo nextcloud.enable-https self-signed</code> 7.To access the setup pi3 server from outside the local network, you&rsquo;ll need to map the dynamic dns provided by your ISP to a global address. I used no-ip and my netgear router to facilitate this. 8. Do note that when you upload files, by default they&rsquo;re saved to the microSD card!![btw]here: /var/snap/nextcloud/common/nextcloud/data/<em>NC_user</em>/files[/btw]. Read <a href=https://help.nextcloud.com/t/is-there-a-safe-and-reliable-way-to-move-data-directory-out-of-web-root/3642/51>this forum</a> for details. 9. If more than one user would be using the external data mount either install the &lsquo;File access control&rsquo; app and setup rules or create folders for each person and just mount those folders for each user in the Nextcloud admin panel.</p></div><div class=interactions><button id=toggle-comments class=toggle-button>üí¨ Interactions and Comments</button><div id=comments-section class=comments style=display:none><section id=isso-thread><noscript>Javascript needs to be activated to view comments.</noscript></section></div></div><script>document.getElementById("toggle-comments").addEventListener("click",function(){var e,t=document.getElementById("comments-section");t.style.display==="none"?(t.innerHTML.trim()||(e=document.createElement("script"),e.setAttribute("data-isso","https://isso.srikanthperinkulam.com/"),e.setAttribute("data-isso-id",""),e.setAttribute("data-isso-css","true"),e.setAttribute("data-isso-lang","en"),e.setAttribute("data-isso-reply-to-self","true"),e.setAttribute("data-isso-reply-notifications","true"),e.setAttribute("data-isso-require-author","true"),e.setAttribute("data-isso-require-email","false"),e.setAttribute("data-isso-max-comments-top","10"),e.setAttribute("data-isso-max-comments-nested","5"),e.setAttribute("data-isso-reveal-on-click","5"),e.setAttribute("data-isso-avatar","false"),e.setAttribute("data-isso-gravatar","true"),e.setAttribute("data-isso-feed","false"),e.setAttribute("data-isso-vote","true"),e.src="https://isso.srikanthperinkulam.com/js/embed.min.js",t.appendChild(e)),t.style.display="block"):t.style.display="none"})</script><footer class=post-footer><ul class=post-tags><li><a href=https://srikanthperinkulam.com/tags/chatter/>Chatter</a></li><li><a href=https://srikanthperinkulam.com/tags/coreos/>Coreos</a></li><li><a href=https://srikanthperinkulam.com/tags/nextcloud-box/>Nextcloud-Box</a></li><li><a href=https://srikanthperinkulam.com/tags/snappy/>Snappy</a></li><li><a href=https://srikanthperinkulam.com/tags/ubuntu/>Ubuntu</a></li></ul><nav class=paginav><a class=prev href=https://srikanthperinkulam.com/2018/08/11/takayna/><span class=title>¬´ Prev</span><br><span>Takayna</span>
</a><a class=next href=https://srikanthperinkulam.com/2018/07/04/acadia/><span class=title>Next ¬ª</span><br><span>Acadia</span></a></nav></footer></article></main><footer class=footer></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><footer class=footer><section class=h-card><a class="u-url u-uid" href=https://srikanthperinkulam.com/><span class=p-name>Srikanth Perinkulam</span>
</a><span><img class=u-photo src=/images/favicon/favicon-32x32.png style=display:none alt></span>
<span class=p-note><br>Mountains, Family, Privacy and everything else.<br>Current location: <span class=p-locality>CDMX >> Cameroon.</span><br>Contact: <a class=u-url rel=me href=https://micro.blog/sp>Micro.blog</a> |
<a class=u-url rel=me href=https://chat.srkn.org/@ssp>Fediverse</a> |
<a class=u-url rel=me href=https://github.com/sriperinkulam>Github</a></span></section></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>