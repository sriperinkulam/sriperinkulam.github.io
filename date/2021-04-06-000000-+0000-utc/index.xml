<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>2021-04-06 00:00:00 &#43;0000 UTC on Srikanth Perinkulam</title>
    <link>https://srikanthperinkulam.com/date/2021-04-06-000000-&#43;0000-utc/index.xml</link>
    <description>Recent content in 2021-04-06 00:00:00 &#43;0000 UTC on Srikanth Perinkulam</description>
    <generator>Hugo</generator>
    <language>en</language>
    <managingEditor>ssphugo@srkn.anonaddy.com (Srikanth Perinkulam)</managingEditor>
    <webMaster>ssphugo@srkn.anonaddy.com (Srikanth Perinkulam)</webMaster>
    <lastBuildDate>Tue, 06 Apr 2021 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://srikanthperinkulam.com/date/2021-04-06-000000-+0000-utc/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Installing Trilium Notes</title>
      <link>https://srikanthperinkulam.com/2021/04/06/installing-trilium-notes/</link>
      <pubDate>Tue, 06 Apr 2021 00:00:00 +0000</pubDate><author>ssphugo@srkn.anonaddy.com (Srikanth Perinkulam)</author>
      <guid>https://srikanthperinkulam.com/2021/04/06/installing-trilium-notes/</guid>
      <description>&lt;p&gt;&lt;em&gt;I wrote this guide &lt;a href=&#34;https://community.hetzner.com/tutorials/install-trilium-notes-using-docker&#34;&gt;initially for the Hetzner community&lt;/a&gt;. Posting here for posterity.&lt;/em&gt; Leave a comment if any of this doesn&amp;rsquo;t make sense. I&amp;rsquo;ll be more than happy to help.&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;p&gt;Trilium Notes is a hierarchical note taking application with focus on building large personal knowledge bases. See the &lt;a href=&#34;https://github.com/zadam/trilium&#34;&gt;Trilium Github&lt;/a&gt; page for more details. In this tutorial we will deploy a Trilium instance to install this open source and self-hosted alternative to Evernote on a fresh Debian server.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Prerequisites&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;To get this running you would need&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;A server with Docker and Docker-compose installed. There&amp;rsquo;s &lt;a href=&#34;https://community.hetzner.com/tutorials/debian-base-configuration-docker&#34;&gt;an easy step-by-step tutorial&lt;/a&gt; that you could follow.&lt;/li&gt;&#xA;&lt;li&gt;A domain pointing to the IP address of your server instance. The tutorial assumes you have pointed the domain &lt;code&gt;notes.example.com&lt;/code&gt; to your server IP address.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;step-1---setup-docker-network-and-our-work-folder&#34;&gt;Step 1 - Setup Docker network and our work folder&lt;/h2&gt;&#xA;&lt;p&gt;For ease of deployment and maintenance, we will use Docker in &lt;a href=&#34;https://docs.docker.com/engine/swarm/&#34;&gt;swarm mode&lt;/a&gt;. For security certificates and application mapping we will use &lt;a href=&#34;https://docs.traefik.io/&#34;&gt;Traefik&lt;/a&gt; as a reverse proxy. It&amp;rsquo;s perfectly fine if you&amp;rsquo;ve not used these services before. All necessary steps to get them working are outlined in detail below.&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Initialise the docker swarm: &lt;code&gt;sudo docker swarm init&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Setup a &lt;a href=&#34;https://docs.docker.com/engine/reference/commandline/network/&#34;&gt;network&lt;/a&gt; for the Traefik container: &lt;code&gt;sudo docker network create --driver=overlay traefik-net&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Create a directory where we will save all our stack yml files and navigate to that directory: &lt;code&gt;mkdir stacks &amp;amp;&amp;amp; cd stacks&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;httpscommunityhetznercomtutorialsinstall-trilium-notes-using-dockerstep-2---&#34;&gt;[](&lt;a href=&#34;https://community.hetzner.com/tutorials/install-trilium-notes-using-docker#step-2---&#34;&gt;https://community.hetzner.com/tutorials/install-trilium-notes-using-docker#step-2---&lt;/a&gt;&lt;/h2&gt;&#xA;&lt;p&gt;categories:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Guides&#xA;coverImage: Trilium01.png&#xA;date: &amp;ldquo;2021-04-06&amp;rdquo;&#xA;tags:&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;evernote-alternative&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;trilium-docker&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;update&#xA;title: Installing Trilium Notes&#xA;&amp;mdash;create-the-yml-file-for-traefik)Step 2.1 - Create the yml file for Traefik&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Create a yml file for traefik: &lt;code&gt;nano traefik-ssl.yml&lt;/code&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Copy over the following contents into the yml file:&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;version: &amp;#34;3.7&amp;#34;&#xA;&#xA;services:&#xA;  traefik:&#xA;    image: traefik:${VERSION:-v1.7.24-alpine}&#xA;    ports:&#xA;      - { target: 80, published: 80, mode: host, protocol: tcp }&#xA;      - { target: 443, published: 443, mode: host, protocol: tcp }&#xA;    command:&#xA;      # - --debug&#xA;      # - --loglevel=INFO&#xA;      - --entryPoints=Name:http Address::80 Compress:true Redirect.EntryPoint:https&#xA;      - --entryPoints=Name:https Address::443 Compress:true TLS&#xA;      - --defaultEntryPoints=https,http&#xA;      - --providers.docker.endpoint=tcp://socket-proxy:2375&#xA;      - --docker.swarmmode=true&#xA;      - --docker.exposedbydefault=false&#xA;      - --docker.network=traefik-net&#xA;      - --metrics.prometheus=true&#xA;      - --consul&#xA;      - --consul.endpoint=consul:8500&#xA;      - --consul.prefix=traefik&#xA;      - --acme&#xA;      - --acme.onHostRule=true&#xA;      - --acme.storage=traefik/acme/account&#xA;      - --acme.acmeLogging=true&#xA;      - --acme.entryPoint=https&#xA;      - --acme.httpChallenge.entryPoint=http&#xA;     # - --update email&#xA;      - --acme.email=${ACME_EMAIL:-noreply@example.com} &#xA;      - --api&#xA;    deploy:&#xA;      mode: ${MODE:-replicated}&#xA;      placement:&#xA;        constraints: [node.role==manager]&#xA;    networks:&#xA;      - internal&#xA;      - traefik&#xA;&#xA;  socket-proxy:&#xA;    image: tecnativa/docker-socket-proxy&#xA;    volumes:&#xA;      - /var/run/docker.sock:/var/run/docker.sock:ro&#xA;    environment:&#xA;      CONTAINERS: 1&#xA;    networks:&#xA;      - internal&#xA;      - traefik&#xA;&#xA;  consul:&#xA;    image: consul:1.7.2&#xA;    command: agent -server -bootstrap-expect=1 -client=0.0.0.0&#xA;    environment:&#xA;      CONSUL_BIND_INTERFACE: eth0&#xA;      CONSUL_CLIENT_INTERFACE: eth0&#xA;      CONSUL_LOCAL_CONFIG: &amp;#39;{ &amp;#34;limits&amp;#34;: { &amp;#34;txn_max_req_len&amp;#34;: 2048000, &amp;#34;kv_max_value_size&amp;#34;: 2048000 } }&amp;#39;&#xA;    volumes:&#xA;      - ${VOLUME_PATH}consul:/consul/data&#xA;    networks:&#xA;      - traefik&#xA;      - internal&#xA;&#xA;volumes:&#xA;  consul:&#xA;&#xA;networks:&#xA;  internal:&#xA;    driver: overlay&#xA;    attachable: true&#xA;  traefik:&#xA;    external: true&#xA;    name: traefik-net&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;step-22---create-the-yml-file-for-trilium&#34;&gt;Step 2.2 - Create the yml file for Trilium&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Create a yml file for trilium: &lt;code&gt;nano trilium.yml&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Copy over the following contents into the yml file:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;version: &amp;#39;3.7&amp;#39;&#xA;services:&#xA;  web:&#xA;    image: zadam/trilium:0.46.7&#xA;    volumes:&#xA;      - ${VOLUME_PATH}trilium-data:/root/trilium-data&#xA;    deploy:&#xA;      labels:&#xA;        - traefik.port=8080&#xA;        - traefik.enable=true&#xA;        - traefik.frontend.rule=Host:${DOMAIN:-notes.localhost}&#xA;    networks:&#xA;      - traefik&#xA;volumes:&#xA;  trilium-data:&#xA;networks:&#xA;  traefik:&#xA;    external: true&#xA;    name: traefik-net&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;httpscommunityhetznercomtutorialsinstall-trilium-notes-using-dockerstep-3---deploy-the-stacks&#34;&gt;&lt;a href=&#34;https://community.hetzner.com/tutorials/install-trilium-notes-using-docker#step-3---deploy-the-stacks&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&#xA;&lt;h2 id=&#34;step-3---deploy-the-stacks&#34;&gt;Step 3 - Deploy the stacks&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Deploy the Traefik stack: &lt;code&gt;sudo docker stack deploy -c traefik-ssl.yml traefik&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Deploy the Trilium stack: &lt;code&gt;DOMAIN=notes.example.com SCHEME=https docker stack deploy -c trilium.yml trilium&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;Give the system a few minutes to fetch the docker images and setup and run the containers in the background. To check the status of the containers you can run the command: &lt;code&gt;docker ps -a&lt;/code&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;step-4---finish-the-setup-in-your-browser&#34;&gt;Step 4 - Finish the setup in your browser&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Navigate to &lt;code&gt;notes.example.com&lt;/code&gt; in your browser. You should now be presented with the following options as shown in the image below:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;images/Trilium01.png&#34; alt=&#34;&#34;  /&gt;&#xA;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Select the first option and click &amp;lsquo;Next&amp;rsquo;&lt;/li&gt;&#xA;&lt;li&gt;Create a user account for your Trilium Notes instance in the next screen and you should be all set now!&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;httpscommunityhetznercomtutorialsinstall-trilium-notes-using-dockerconclusionconclusion&#34;&gt;&lt;a href=&#34;https://community.hetzner.com/tutorials/install-trilium-notes-using-docker#conclusion&#34;&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;&#xA;&lt;p&gt;With a few simple steps we were able to setup and run a good alternative to Evernote. You can even import your notes from Evernote if you&amp;rsquo;d like.&lt;/p&gt;&#xA;&lt;p&gt;Go ahead and explore your new setup! The &lt;a href=&#34;https://github.com/zadam/trilium/wiki&#34;&gt;Wiki&lt;/a&gt; is also very informative for what you can do next.&lt;/p&gt;&#xA;</description>
    </item>
  </channel>
</rss>
